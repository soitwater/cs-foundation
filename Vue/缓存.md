# 缓存

## 步骤
### 在App.vue
```vue
<template>
  <div id="app">
    <keep-alive>
      <router-view v-if="$route.meta.keepAlive" />
    </keep-alive>
    <router-view v-if="!$route.meta.keepAlive" />
  </div>
</template>
```
### 在`router.js`路由中
```js
{
  path: '/mine',
  name: 'Mine',
  // 增加`keepAlive`属性
  meta: { title: 'Mine', keepAlive: true },
  component: () => import("@/pages/Mine/Mine.vue"),
}
```
### 有了前2步，就已经实现了缓存。但有时希望从A页面到B页面时，不要缓存，那么就可以...
```js
// 在需要做缓存的组件内
export default {
  beforeRouteEnter(to, from, next) {
    to.meta["fromPath"] = from.path;
    // 从 /help 跳转到当前组件时，则设置当前组件的`meta`的`needFresh`为`true`
    if (from.path === "/help") {
      to.meta["needFresh"] = true;
    } else {
      to.meta["needFresh"] = false;
    }
    next();
  },
  activated() {
    if (this.$route.meta["needFresh"]) {
      // 表示初始化数据
      this.init();
    }
  },
}
```