# 持续集成
使用 `GitLab CI/CD` 进行持续集成

## 流程
- GitLab CI/CD 的 pipeline 具体流程和操作在 .gitlab-ci.yml 文件中申明，
- 触发 pipeline 后，由 GitLab Runner 根据  .gitlab-ci.yml 文件运行，
- 运行结束后将返回至 GitLab 系统。
###  .gitlab-ci.yml 文件
- .gitlab-ci.yml 文件是一个申明式文件，用于定义 GitLab CI/CD 流程分为几个阶段，每个阶段分别干什么。
- 可以使用shell脚本以及python脚本辅助
- .gitlab-ci.yml 文件示例
  ```shell
  image: node
  # 定义 stages
  stages:
    - build
    - test
  # 定义 job
   build 阶段:
    stage: build
    script:
      - echo "build stage"
  # 定义 job
  发布到测试环境:
    stage: test
    script:
      - echo "test stage"
  ```
### GitLab Runner
- GitLab Runner 是 CI 的执行环境，负责执行 gitlab-ci.yml 文件，并将结果返回给 GitLab 系统。
- Runner 具体可以有多种形式，docker、虚拟机或 shell，在注册 runner 时选定方式。



## 参考
- [基于 GitLab CI/CD 的自动化构建、发布实践](https://wx.qq.com/cgi-bin/mmwebwx-bin/webwxcheckurl?requrl=http%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzU3NjczNDk2MA%3D%3D%26mid%3D2247484434%26idx%3D1%26sn%3D5a24a98c47fc012565feaafde0b25fe9%26chksm%3Dfd0e178dca799e9b3f75ff680d9c4454254a32a3be7a43dd491e04860df305696ca832c6cc88%26mpshare%3D1%26scene%3D1%26srcid%3D%26sharer_sharetime%3D1564964578796%26sharer_shareid%3D150b1741fd4181e0e5e5c9fea9b5ae1c%23rd&skey=%40crypt_c574cefb_0e8f38a8cc0f40a4fc2847fc057c781f&deviceid=e353972576500532&pass_ticket=hlYQ9rNS6cqtX1eQZkO9TPcB5GMz4GZ9LQq9%252F3mQem8ZaN8bIBja5L17oC4EmTQ7&opcode=2&scene=1&username=@b13c9c17b44eeccdc7f3a09ab0a85cf00e2f65f4f08fa9109cdb8e66d9303c5e)