# CDN(内容分发网络)

## 概念
CDN是将源站内容分发至全国所有的节点，从而提高用户访问网站的响应速度。  
主要解决：跨境访问，服务器负载能力低，带宽小等问题

## 经CDN缓存后的网站访问过程演变为：
1.  用户在浏览器中输入要访问的域名； 
2.  浏览器向域名解析服务器发出解析请求，由于CDN对域名解析过程进行了调整，所以用户端一般得到的是该域名对应的CNAME记录，此时浏览器需要再次对获得的CNAME域名进行解析才能得到缓存服务器实际的IP地址。  
  ```python
  注：在此过程中，全局负载均衡DNS解析服务器会根据用户端的源IP地址，如地理位置（深圳还是上海）、接入网类型（电信还是网通）将用户的访问请求定位到离用户路由最短、位置最近、负载最轻的Cache节点（缓存服务器）上，实现就近定位。定位优先原则可按位置、可按路由、也可按负载等。 
  ```
4. 再次解析后浏览器得到该域名CDN缓存服务器的实际IP地址，向缓存服务器发出访问请求； 
5. 缓存服务器根据浏览器提供的域名，通过Cache内部专用DNS解析得到此域名源服务器的真实IP地址，再由缓存服务器向此真实IP地址提交访问请求； 
6. 缓存服务器从真实IP地址得到内容后，一方面在本地进行保存，以备以后使用，同时把得到的数据发送到客户端浏览器，完成访问的响应过程； 
7. 用户端得到由缓存服务器传回的数据后显示出来，至此完成整个域名访问过程。  


  通过以上分析可以看到，不论是否使用CDN网络，普通用户客户端设置不需做任何改变，直接使用被加速网站原有域名访问即可。对于要加速的网站，只需修改整个访问过程中的域名解析部分，便能实现透明的网络加速服务。

## 作用
- 选择优质节点 (靠近用户,分布存储,当一个节点挂了其他节点依旧可用......)
- 减少源站缓存压力 (提高缓存命中率,减少回源流量)

## 前端工作中怎样根据CDN优化网站性能
- 静态资源(JS文件，图片，外部依赖库等不常变化的文件)使用CDN加速
- 使用不同域名的CDN服务，因为浏览器对同一域名的请求的最大并发连接数有限制

## 参考
- [CDN技术原理](https://www.cnblogs.com/flymolgee/articles/4331784.html)
- [CDN的原理以及其中的一些技术](https://blog.csdn.net/qq_40083727/article/details/81090584)