# 数据传输过程
以一个客户端请求服务器某个web页面（HTTP请求）为例：  
访问DNS服务器：将域名解析为IP地址  
1. 客户端应用层：HTTP协议发出请求（HTTP请求报文）
2. 客户端传输层：TCP协议切割HTTP请求报文，并为各个报文的首部添加标记以及`源端口 目标端口`，每个报文3次握手
3. 客户端网络层：IP协议增加`源IP 目标IP MAC地址`（通信目的地）（一边中转一边传送）
4. 客户端链路层：添加以太网首部信息
5. 服务端链路层：去掉以太网首部信息
6. 服务端网络层：去掉IP首部信息
7. 服务端传输层：去掉TCP首部信息，接收并拼接报文段
8. 服务端应用层：解析HTTP数据

## 解释
- 网关一般是路由,路由依据路由协议(eg：`OSRF, BGP`)，根据`源IP,目标IP`，知道下一个网关的MAC地址
- 常见的协议
  * 应用层：`DHCP  HTTP  HTTPS  RTMP  P2P  DMS  GTP  RPC`
  * 传输层：`UDP  TCP`
  * 网络层：`ICMP  IP  OSRF  BGP  IPSec  GRE`
  * 链路层：`ARP  VLAN  STP`
  * 物理层：`网络跳线`

## 二层设备，三层设备
- 只要是在网络上跑的包那就是完整的，都有HTTP头，TCP头，IP头，MAC头等
- 可以有下层没上层，但不可以有上层没下层。例如：TCP三次握手中，IP/MAC也一直在忙活的
- 二层设备：会接受全部的报文，但只对HTTP报文解析到MAC头  
  三层设备：会接受全部的报文，但只对HTTP报文解析到MAC头，IP头

