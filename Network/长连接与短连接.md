# 长连接与短连接

## 长连接与短连接
- HTTP并不分长连接以及短连接, 长连接以及短连接说的其实是TCP
- TCP连接是一个双向的通道, 它可以保持一段时间不关闭, 因此TCP连接才有真正的长连接以及短连接。因此HTTP是应用层的协议, 而TCP才是真正的传输层协议(这一层的协议才有连接的说法)
- 长连接的目的其实是：保持TCP通道打开(复用)
- HTTP/1.1默认长连接：浏览器/服务器都需要设置(支持)：`Connection: keep-alive`
- 长连接：多个HTTP请求都走同一个TCP通道
- 长连接并不是永久连接，而是在一段时间内(这个时间)如果没有HTTP请求, 那么长连接就会关闭

## 长轮询与短轮询
- 对于客户端，不管是长轮询还是短轮询都是一样，不断地向服务器发起请求
- 对于服务器，短轮询情况下服务端每次请求不管有没有变化都会立即返回结果，而长轮询情况下，如果有变化才会立即返回结果，而没有变化的话，则不会再立即给客户端返回结果，直到超时为止。
- 即便是长轮询，依旧有问题，因为长轮询时请求挂起，同样会导致资源的浪费
- 短轮询需要更快的处理速度，长轮询需要更强的处理并发能力(因为请求会被挂起)
- 长轮询与短轮询都不是真正的`服务器主动推送`，其实都是依赖客户端发起Ajax请求之后进行的响应。

## `长连接与短连接`与`长轮询与短轮询`
连接与轮询的实现的方式不同，连接的长短是通过协议来规定和实现的。而轮询的长短，是服务器通过编程的方式手动挂起请求来实现的

## 参考
- [谈谈HTTP协议中的短轮询、长轮询、长连接和短连接](https://baijiahao.baidu.com/s?id=1581487891892427649&wfr=spider&for=pc)
- [Web 通信 之 长连接、长轮询（long polling）](https://www.cnblogs.com/goody9807/p/4208845.html)
- [Ajax、Comet与Websocket](https://www.cnblogs.com/liangxiaofeng/p/5230858.html)